# v0.29.x series (next stable)

## v0.29.0 (upcoming release)

% ### Deprecated
%

### Removed

* ‚ö†Ô∏è The {class}`.SpectralSet` class and its children are removed ({ghpr}`439`).
  Spectral discretization is now handled by the {class}`.SpectralGrid` class and
  its children.
* ‚ö†Ô∏è The {meth}`.Atmosphere.spectral_set` method is removed ({ghpr}`439`). The
  responsibility of deriving a spectral grid from a molecular absorption
  database is transferred to the {meth}`.SpectralGrid.from_absorption_database`
  constructor.
* ‚ö†Ô∏è The {class}`.MultiDeltaSpectrum` class is removed ({ghpr}`439`). Spectral
  response functions are now modelled using dedicated types
  ({class}`.SpectralResponseFunction` and its children).
* ‚ö†Ô∏è Several SRF-related methods of the {class}`.Spectrum` family are removed
  ({ghpr}`439`). The corresponding functionality is transferred to the
  {class}`.SpectralResponseFunction` family.
* ‚ö†Ô∏è The {class}`.QuadSpec` class is removed ({ghpr}`439`). Its functionality is
  transferred to the {class}`.CKDQuadConfig` type.
* ‚ö†Ô∏è The {meth}`.AbstractHeterogeneousAtmosphere.eval_transmittance_accross_spectral_set`
  is removed and its functionality transferred to the
  {func}`.eval_transmittance_mono` and {func}`.eval_transmittance_ckd` helpers
  ({ghpr}`439`).

### Added

* The {func}`.mesh_from_dem` function optionally adds texture coordinates to the
  generated mesh ({ghpr}`435`).
* The {class}`.BufferMesh` class can now initialize texture coordinates as well
  ({ghpr}`435`).
* Added polarized mode, Rayleigh and tabulated phase functions ({ghpr}`438`).
* A new {class}`.SpectralGrid` type hierarchy is added ({ghpr}`439`). It handles
  the spectral discretization.
* A new {class}`.SpectralResponseFunction` type hierarchy is added
  ({ghpr}`439`). It models the spectral response function of instruments.
* üñ•Ô∏è A new {class}`.SubtypeDispatcher` type is added ({ghpr}`439`). This class
  is a very simple factory intended to dispatch subtypes of a parent type
  depending on the current active mode.
* üñ•Ô∏è A new {func}`.is_sorted` validator is added ({ghpr}`439`).

### Changed

* ‚ö†Ô∏è Refactored DEM handling infrastructure ({ghpr}`428`).
* ‚ö†Ô∏è Refactored *attrs*-based features ({ghpr}`437`).
* ‚ö†Ô∏è The `quad_spec` parameter of the {class}`.Experiment` constructors is
  replaced by the `ckd_quad_config` parameter ({ghpr}`439`).
* ‚ö†Ô∏è The {meth}`.Mode.check` method's signature is changed ({ghpr}`439`). It
  accepts now a combination of {class}`.ModeFlag` values.
* ‚ö†Ô∏è The {mod}`eradiate.spectral` subpackage is reorganized ({ghpr}`439`).
  The main components are still exposed in {mod}`eradiate.spectral` directly.
* ‚ö†Ô∏è The background spectral grid, formerly exposed as
  {data}`.Experiment.default_spectral_set`, is now private and renamed
  `_background_spectral_grid` ({ghpr}`439`). It can still be configured by the
  `background_spectral_grid` parameter.
* ‚ö†Ô∏è The {attr}`.Measure.srf` field is now a {class}`.SpectralResponseFunction`
  instance ({ghpr}`439`). The dictionary interface used in {class}`.Measure`
  constructors remains unchanged.
* ‚ö†Ô∏è The {class}`.MultiGenerator` is moved to {mod}`eradiate.util.misc`
  ({ghpr}`439`).
* üìñ Overhauled the
  {doc}`Spectral discretization guide </src/user_guide/spectral_discretization>`
  ({ghpr}`439`).
* üìñ Improved factory documentation ({ghpr}`441`).

% ### Fixed
%

### Internal changes

* üñ•Ô∏è Added an explicit CKD spectral quadrature calculation step to the
  initialization sequence of {class}`.Experiment` instances ({ghpr}`439`).
* üñ•Ô∏è Switched to `Pixi <https://pixi.sh/>`_ for project management ({ghpr}`440`).
* üñ•Ô∏è Removed unused `rad_profile_factory` ({ghpr}`441`).
